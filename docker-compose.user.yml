# Docker Compose - User's Original Format Enhanced
# This matches your existing setup with all new v0.12.0 features available

version: "3"

services:
  hoymiles_smiles:
    container_name: "hoymiles_smiles"
    build:
      context: .
      dockerfile: Dockerfile
    image: hoymiles_smiles
    network_mode: host
    environment:
      # ===== Required Settings =====
      DTU_HOST: 192.168.1.194
      QUERY_PERIOD: 300
      
      # ===== Optional Settings =====
      # Uncomment and modify as needed
      
      # DTU Options  
      # DTU_PORT: 502
      # MODBUS_UNIT_ID: 1
      
      # Timing Options
      # TIMEZONE: America/New_York
      # RESET_HOUR: 23
      # EXPIRE_AFTER: 0
      
      # Persistence (survives restarts)
      # PERSISTENCE_ENABLED: true
      # DATABASE_PATH: /data/hoymiles-smiles.db
      
      # Web Server / Health Monitoring
      # Access at http://your-ip:PORT/health
      # HEALTH_ENABLED: true
      # HEALTH_PORT: 8080              # Web server port (default: 8080)
      # METRICS_ENABLED: true
      
      # Logging
      # LOG_LEVEL: INFO
      # LOG_FORMAT: standard
      # LOG_TO_CONSOLE: true
    
    volumes:
      - ./data:/data
    
    labels:
      - "com.centurylinklabs.watchtower.enable=false"
    
    restart: unless-stopped

